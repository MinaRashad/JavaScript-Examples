<!DOCTYPE html>
<html>
<head>
    <title>Portfolio Desktop</title>
    <!DOCTYPE html>
    <html>
    <head>
    <title>Portfolio Desktop</title>
    <style>
    body {
    background-color: #202020; 
    font-family: monospace;   
    color: #f0f0f0;          
    margin: 0;               
    overflow: hidden;  
}

/* Status Bar */
.status-bar {
    background-color: black;
    color: white;
    padding: 5px 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    z-index: 999;
}
.time { /* Style for time in status bar */
    font-size: 14px;
    position: relative;
    left: 50%;
    transform: translateX(-50%); /* Center the time */
}
.battery { /* Container for battery icon and progress bar */
    display: flex;
    align-items: center;
}

.battery-text{
    margin-right: 5px;

}

.battery-level { /* Container for battery progress bar */
    width: 50px;
    height: 20px;
    background-color: #333;
    border-radius: 5px;
    position: relative;
}

.battery-progress { /* Style for battery progress bar */
    background-color: #007bff; 
    width: 75%; /* Example battery level */
    height: 100%;
}

/* Desktop */
.desktop {
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-start;
    align-items: flex-start;
    width: 100vw;
    height: calc(100vh - 30px); /* Account for status bar */

    /* Gradient Background */
    background: linear-gradient(135deg, #2980b9, #6dd5fa, #ffffff);
}

/* File Icons */
.file-icon {
    display: inline-block;
    width: 80px;
    height: 100px;
    margin: 10px;
    padding: 10px;
    border: none; /* Remove background */
    text-align: center;
    cursor: pointer;
    user-select: none;
    position: absolute;
    transition: transform 0.2s; 
    color: white; /* Make text white */
    text-shadow: 1px 1px 2px black; /* Subtle text shadow */
    background-color: transparent; /* Transparent background */
}
    
.file-icon.highlighted {
            background-color: rgba(0, 123, 255, 0.3); /* Semi-transparent blue highlight */
            border-radius: 5px; /* Add rounded corners to the highlight */
        }
    .file-icon:hover {
        transform: scale(1.05); /* Subtle zoom on hover */
        box-shadow: 0 0 5px #007bff; /* Blue glow on hover */
    }
    
    .file-icon span {
        display: block;
        margin-top: 5px;
    }
    
    .file-icon::before { /* Icon content using Unicode characters */
        content: "üìÑ"; /* Default document icon */
        font-size: 40px;
        display: block;
    }

    .fullscreen-icon {
            cursor: pointer;
            font-size: 20px; 
            padding: 5px;
            height: 100%;
    }

    .fullscreen-icon:hover {
        color: white; /* Blue on hover */
        background-color: #2e3339;
    }
    

    
    /* Specific icons using Unicode (replace as needed) */
    [data-name="Knowledge Cards"]::before { content: "üß†"; }
    [data-name="Piano"]::before { content: "üéπ"; }
    [data-name="Chess"]::before { content: "‚ôü"; }
    [data-name="Solar System"]::before { content: "ü™ê"; }
    [data-name="Hearing Test"]::before { content: "üëÇ"; } 
    [data-name="Gardening Game"]::before { content: "üå±"; } 
    </style>
    </head>
    
    <body>

        <div class="status-bar">
            <div class="time" id="time"></div>
            <div class="battery">
                <span class="battery-text">100%</span>
                <div class="battery-level">
                    <div class="battery-progress"></div>
                </div>
                <span class="fullscreen-icon" onclick="toggleFullScreen()">üóñ</span>

            </div>

        </div>


        
    <div class="desktop">
        <div class="file-icon" data-name="Knowledge Cards" data-link="KnowledgeCards.html">
            <span class="file-name">Knowledge Cards</span>
        </div>
        <div class="file-icon" data-name="Piano" data-link="piano.html">
            <span class="file-name">Piano</span>
        </div>
        <div class="file-icon" data-name="Chess" data-link="chess.html">
            <span class="file-name">Chess</span>
        </div>
        <div class="file-icon" data-name="Solar System" data-link="solarSystem.html">
            <span class="file-name">Solar System</span>
        </div> 
        <div class="file-icon" data-name="Hearing Test" data-link="hearing_test.html">
            <span class="file-name">Hearing Test</span>
        </div>
        <div class="file-icon" data-name="Gardening Game" data-link="gardening_game.html">
            <span class="file-name">Gardening Game</span>
        </div>

        </div>
    
    <script>
        const fileIcons = document.querySelectorAll('.file-icon');
        fileIcons.forEach(icon => {
            const iconName = icon.dataset.name;

            // Load coordinates from local storage or set initial random positions
            let storedPosition = JSON.parse(localStorage.getItem(iconName + '_position'));
            if (storedPosition) {
                icon.style.left = storedPosition.x + 'px';
                icon.style.top = storedPosition.y + 'px';
            } else {
                let x = Math.floor(Math.random() * window.innerWidth);
                let y = Math.floor(Math.random() * window.innerHeight * 0.5);
                icon.style.left = x + 'px';
                icon.style.top = y + 'px';
                localStorage.setItem(iconName + '_position', JSON.stringify({ x, y }));
            }
            
            let offsetX, offsetY;
            let isDragging = false;

            icon.addEventListener('mousedown', (event) => {
                event.preventDefault(); // Prevent default text selection
                offsetX = event.clientX - icon.getBoundingClientRect().left;
                offsetY = event.clientY - icon.getBoundingClientRect().top;
                isDragging = true;

                fileIcons.forEach(otherIcon => otherIcon.style.zIndex = '');
                icon.style.zIndex = 1;
            });

            document.addEventListener('mousemove', (event) => {
                if (!isDragging) return;
                icon.style.left = (event.clientX - offsetX) + 'px';
                icon.style.top = (event.clientY - offsetY) + 'px';

                // 2. Update local storage on drag
                localStorage.setItem(iconName + "_position", JSON.stringify({ 
                    x: event.clientX - offsetX, 
                    y: event.clientY - offsetY 
                }));

            });

            icon.addEventListener('mouseup', () => {
                isDragging = false;
            });

            // Highlight on single click
            icon.addEventListener('click', () => {
                fileIcons.forEach(otherIcon => otherIcon.classList.remove('highlighted'));
                icon.classList.add('highlighted');

            });

            // Follow link on double click
            icon.addEventListener('dblclick', () => {
                console.log
                window.location.href = icon.dataset.link; // Use the 'data-link' attribute for the URL
            });

            // clicking anywere on the desktop will remove the highlight and dragging
            document.querySelector('.desktop').addEventListener('click', (event) => {
                // if event not icon
                if (!icon.contains(event.target)) {
                    icon.classList.remove('highlighted');
                    isDragging = false;
                }
            });            

        });



         // Update the time in the status bar
         function updateStatus() {

            // time
            const timeElement = document.getElementById('time');
            const now = new Date();
            const options = {day: '2-digit', month: 'short', year: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true };
            timeElement.textContent = now.toLocaleString(undefined, options);

            // battery
            const batteryProgress = document.querySelector('.battery-progress');
            const batterText = document.querySelector('.battery-text');

            navigator.getBattery().then(battery => {
                const level = battery.level*100;
                batterText.textContent = `${level}%`;
                // width::before
                batteryProgress.style.width = `${level}%`;
                
            });
        }

                // Fullscreen Functionality
                function toggleFullScreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }

        updateStatus(); // Initial update
        setInterval(updateStatus, 1000); // Update every second
    </script>
</body>
</html>